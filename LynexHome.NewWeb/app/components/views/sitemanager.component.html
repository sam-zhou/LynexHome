<div class="loader-container" [hidden]="!isBusy">
    <div class="loader"></div>
</div>
<div class="item-dialog" [hidden]="isBusy">
    <div class="dialog-header only-show-767">
        <a class="dialog-back pull-left" aria-label="Back" (click)="isMenuSelected = false" [ngClass]="{'back-button':isMenuSelected}">
            <i class="fa fa-chevron-left" aria-hidden="true"></i>
        </a>
        Site Manager
    </div>
    <div class="col-md-4 pull-left item-list" [ngClass]="{'item-selected':isMenuSelected}">
        <ul>
            <li *ngFor="let site of sites" (click)="selectSite(site)" class="left-menu-item" [ngClass]="{'active':selectedSite && selectedSite.id == site.id}">
                {{site.name}}<span class="selected-item-indicator" >
                                 <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </span>
            </li>
        </ul>
    </div>
    <div class="col-md-8 pull-right item-detail" *ngIf="!selectedSite" >
        <label>Select site to edit</label>
    </div>
    <div class="col-md-8 pull-right item-detail" *ngIf="selectedSite" [ngClass]="{'item-selected':isMenuSelected}">
        
        <form [formGroup]="siteForm" (ngSubmit)="save()">
            <div class="form-group">
                <label for="siteName">Site Name</label>
                <input type="text" required formControlName="name" class="form-control" id="siteName" placeholder="Site Name">

                <small class="form-text text-danger" *ngIf="siteForm.get('name').touched && siteForm.get('name').hasError('required')">
                    Site name is required
                </small>
            </div>

            <div class="form-group">
                <label for="siteAddress">Address</label>
                <input type="text" required formControlName="address" class="form-control" id="siteAddress" placeholder="Address">

                <small class="form-text text-danger" *ngIf="siteForm.get('address').touched && siteForm.get('address').hasError('required')">
                    Address is required
                </small>
            </div>

            <div class="form-group">
                <label for="siteSuburb">Suburb</label>
                <input type="text" required formControlName="suburb" class="form-control" id="siteSuburb" placeholder="Suburb">

                <small class="form-text text-danger" *ngIf="siteForm.get('suburb').touched && siteForm.get('suburb').hasError('required')">
                    Suburb is required
                </small>
            </div>

            <div class="form-group">
                <label for="siteSuburb">State</label>
                <input type="text" required formControlName="state" class="form-control" id="siteState" placeholder="State">

                <small class="form-text text-danger" *ngIf="siteForm.get('state').touched && siteForm.get('state').hasError('required')">
                    State name is required
                </small>
            </div>

            <div class="form-group">
                <label for="siteSuburb">Postcode</label>
                <input type="text" required formControlName="postcode" class="form-control" id="sitePostcode" placeholder="Postcode">

                <small class="form-text text-danger" *ngIf="siteForm.get('postcode').touched && siteForm.get('postcode').hasError('required')">
                    Postcode name is required
                </small>
            </div>

            <div class="form-group">
                <label for="siteSuburb">Country</label>
                <input type="text" required formControlName="country" class="form-control" id="siteCountry" placeholder="Country">

                <small class="form-text text-danger" *ngIf="siteForm.get('country').touched && siteForm.get('country').hasError('required')">
                    Country name is required
                </small>
            </div>

            <button type="submit" [disabled]="!siteForm.valid || !siteForm.dirty" class="btn btn-default pull-right"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp;SAVE</button>
        </form>
    </div>
</div>